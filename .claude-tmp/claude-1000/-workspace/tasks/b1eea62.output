Traceback (most recent call last):
  File "/tmp/tmp.fAGFQP5ACn", line 1, in <module>
    {"exit_code":0,"stderr":"","stdout":" .git-blame-ignore-revs                             |    2 +\n .github/workflows/lint.yml                         |   48 +\n .github/workflows/publish-beta.yml                 |   25 +-\n .pre-commit-config.yaml                            |    8 +\n .pyright-threshold                                 |    1 +\n CHANGELOG.md                                       |  173 +-\n CLAUDE.md                                          |    9 +\n Makefile                                           |   18 +\n PLAN-CHECKLIST.md                                  |  138 +\n PLAN.md                                            |  199 +\n README.md                                          |    2 +-\n _research/PLAN.md                                  |  205 +\n .../adr-002-autonomous-spec-execution.md           | 1093 +----\n docs/02-core-concepts.md                           |    2 +-\n docs/04-cli-command-reference.md                   |   19 +-\n docs/05-mcp-tool-reference.md                      |  239 +-\n docs/06-configuration.md                           |  250 +-\n docs/07-troubleshooting.md                         |    4 +-\n docs/README.md                                     |   10 +-\n .../{sdd-philosophy.md => foundry-philosophy.md}   |   34 +-\n docs/concepts/spec-schema.md                       |    4 -\n docs/guides/autonomy-agent-isolation.md            |  374 ++\n docs/guides/autonomy-supervisor-runbook.md         |  135 +\n docs/guides/intake.md                              |  412 --\n docs/guides/llm-configuration.md                   |  200 +-\n docs/reference/error-codes.md                      |    2 +-\n mcp/capabilities_manifest.json                     |  264 +-\n pyproject.toml                                     |   32 +-\n pytest.ini                                         |    2 +\n samples/foundry-mcp.toml                           |  109 +-\n scripts/guard_autonomous_bash.py                   |  185 +\n scripts/guard_autonomous_write.py                  |  146 +\n skills/foundry-implement-auto/SKILL.md             |  207 +\n .../references/agent-isolation.md                  |   44 +\n .../references/error-codes.md                      |   65 +\n .../foundry-implement-auto/references/preflight.md |  131 +\n .../references/session-management.md               |  124 +\n .../references/step-handlers.md                    |  157 +\n .../references/step-proofs.md                      |   21 +\n .../references/verification-receipts.md            |   58 +\n specs/.plans/autonomous-spec-execution.md          |  482 --\n specs/.plans/dashboard_improvement.md              |  326 --\n specs/.plans/deep-research-cpu-optimization.md     |  251 -\n .../deep-research-token-management-synthesis.md    |  189 -\n specs/.plans/deep-research-token-management.md     |  824 ----\n specs/.plans/document-digest-for-deep-research.md  |  740 ---\n specs/.plans/mcp-server-resilience.md              |  179 -\n specs/.plans/notes-intake.md                       |  503 --\n specs/.plans/perplexity-api-enhancements.md        |  288 --\n specs/.plans/provider-rate-limit-resilience.md     |  390 --\n specs/.plans/remove-mcp-tools-pr-code-test.md      |  170 -\n specs/.plans/research-router-implementation.md     |  234 -\n specs/.plans/resilience-improvements.md            |  381 --\n specs/.plans/semantic-scholar-enhancements.md      |  205 -\n specs/.plans/tavily-api-enhancements.md            |  606 ---\n specs/.plans/test-coverage-parity.md               |  128 -\n specs/.plans/unified-refactoring.md                |  219 -\n ...p-research-cpu-optimization-2026-01-26-001.json | 1134 -----\n ...perplexity-api-enhancements-2026-01-27-001.json |  996 ----\n .../resilience-improvements-2026-01-26-001.json    | 3677 --------------\n ...mantic-scholar-enhancements-2026-01-27-001.json | 1556 ------\n .../active/unified-refactoring-2026-02-06-001.json | 2246 ---------\n .../validate-fix-auto-cleanup-2025-12-15-001.json  |  143 -\n ...tual-hours-auto-calculation-2026-01-06-001.json |  481 --\n .../ai-consultation-layer-2025-12-03-001.json      | 1308 -----\n .../cli-provider-abstraction-2025-11-30-001.json   | 2845 -----------\n .../deep-research-workflow-2025-12-30-001.json     | 2543 ----------\n ...timated-hours-recalculation-2026-01-06-001.json |  330 --\n ...foundry-cli-gap-remediation-2025-12-02-001.json | 1760 -------\n specs/completed/foundry-mcp-2025-01-25-001.json    | 2949 ------------\n .../internal-cli-elimination-2025-12-01-001.json   | 1437 ------\n ...-best-practices-remediation-2025-11-26-001.json | 5090 --------------------\n .../mcp-server-resilience-2026-01-24-001.json      | 1564 ------\n .../mcp-tool-consolidation-2025-12-10-001.json     | 2515 ----------\n .../minified-json-responses-2025-12-31-001.json    |  588 ---\n .../multi-model-consensus-2025-12-05-001.json      |  854 ----\n specs/completed/notes-intake-2025-12-28-001.json   | 1173 -----\n .../observability-stack-2025-12-05-001.json        | 1136 -----\n .../parity-testing-framework-2025-01-26-001.json   |  976 ----\n ...spec-authoring-improvements-2025-12-23-001.json | 1405 ------\n .../phase-remove-tool-2025-12-05-001.json          |  448 --\n ...vider-rate-limit-resilience-2026-01-27-001.json | 1478 ------\n ...e-docquery-rendering-docgen-2025-12-09-001.json | 1406 ------\n .../completed/research-router-2025-12-29-001.json  | 1407 ------\n ...onse-schema-standardization-2025-11-26-001.json | 1761 -------\n .../sdd-cli-native-parity-2025-11-27-001.json      | 2083 --------\n .../sdd-core-operations-2025-11-27-001.json        | 3774 ---------------\n .../completed/sdd-llm-features-2025-11-27-001.json | 1844 -------\n ...c-modification-capabilities-2025-12-23-001.json | 2566 ----------\n .../tavily-api-enhancements-2026-01-25-001.json    | 1934 --------\n .../autonomous-spec-execution-2026-02-14-001.json  | 1089 -----\n ...nt-digest-for-deep-research-2026-01-27-001.json | 3075 ------------\n specs/pending/hello-world-2026-02-19-001.json      |  119 +\n ...move-mcp-tools-pr-code-test-2026-02-13-001.json | 1995 --------\n src/foundry_mcp/__init__.py                        |    4 +-\n src/foundry_mcp/cli/__init__.py                    |   20 +-\n src/foundry_mcp/cli/__main__.py                    |    2 +-\n src/foundry_mcp/cli/agent.py                       |    4 +-\n src/foundry_mcp/cli/commands/__init__.py           |    8 +\n src/foundry_mcp/cli/commands/audit.py              |  174 +\n src/foundry_mcp/cli/commands/cache.py              |    6 +-\n src/foundry_mcp/cli/commands/dev.py                |   12 +-\n src/foundry_mcp/cli/commands/journal.py            |   54 +-\n src/foundry_mcp/cli/commands/lifecycle.py          |   37 +-\n src/foundry_mcp/cli/commands/modify.py             |   48 +-\n src/foundry_mcp/cli/commands/plan.py               |  173 +-\n src/foundry_mcp/cli/commands/review.py             |  204 +-\n src/foundry_mcp/cli/commands/run.py                |  100 +\n src/foundry_mcp/cli/commands/session.py            |   50 +-\n src/foundry_mcp/cli/commands/specs.py              |   97 +-\n src/foundry_mcp/cli/commands/stop.py               |  214 +\n src/foundry_mcp/cli/commands/tasks.py              |   79 +-\n src/foundry_mcp/cli/commands/validate.py           |  131 +-\n src/foundry_mcp/cli/commands/watch.py              |  520 ++\n src/foundry_mcp/cli/config.py                      |    8 +-\n src/foundry_mcp/cli/context.py                     |   34 +-\n src/foundry_mcp/cli/main.py                        |    6 +-\n src/foundry_mcp/cli/output.py                      |    9 +-\n src/foundry_mcp/cli/registry.py                    |   10 +-\n src/foundry_mcp/cli/resilience.py                  |    2 +-\n src/foundry_mcp/config/__init__.py                 |   64 +\n src/foundry_mcp/config/autonomy.py                 |  135 +\n src/foundry_mcp/config/decorators.py               |  131 +\n src/foundry_mcp/config/domains.py                  |  353 ++\n src/foundry_mcp/config/loader.py                   |  779 +++\n src/foundry_mcp/config/parsing.py                  |   88 +\n src/foundry_mcp/{config.py => config/research.py}  | 1249 +----\n src/foundry_mcp/config/server.py                   |  177 +\n src/foundry_mcp/core/__init__.py                   |  110 +-\n src/foundry_mcp/core/ai_consultation/__init__.py   |   67 +\n src/foundry_mcp/core/ai_consultation/cache.py      |  214 +\n .../orchestrator.py}                               |  811 +---\n src/foundry_mcp/core/ai_consultation/types.py      |  331 ++\n src/foundry_mcp/core/authorization.py              | 1008 ++++\n src/foundry_mcp/core/autonomy/__init__.py          |  227 +\n src/foundry_mcp/core/autonomy/audit.py             |  507 ++\n src/foundry_mcp/core/autonomy/context_tracker.py   |  267 +\n src/foundry_mcp/core/autonomy/memory.py            | 1223 +++++\n src/foundry_mcp/core/autonomy/models/__init__.py   |  121 +\n src/foundry_mcp/core/autonomy/models/enums.py      |  112 +\n src/foundry_mcp/core/autonomy/models/gates.py      |   48 +\n src/foundry_mcp/core/autonomy/models/responses.py  |  202 +\n .../core/autonomy/models/session_config.py         |   85 +\n src/foundry_mcp/core/autonomy/models/signals.py    |  324 ++\n src/foundry_mcp/core/autonomy/models/state.py      |  146 +\n src/foundry_mcp/core/autonomy/models/steps.py      |   94 +\n .../core/autonomy/models/verification.py           |  114 +\n src/foundry_mcp/core/autonomy/orchestrator.py      | 1412 ++++++\n src/foundry_mcp/core/autonomy/server_secret.py     |  239 +\n src/foundry_mcp/core/autonomy/signals.py           |   51 +\n src/foundry_mcp/core/autonomy/spec_adapter.py      |  149 +\n src/foundry_mcp/core/autonomy/spec_hash.py         |  289 ++\n src/foundry_mcp/core/autonomy/state_migrations.py  |  413 ++\n src/foundry_mcp/core/autonomy/step_emitters.py     | 1244 +++++\n src/foundry_mcp/core/autonomy/write_lock.py        |  687 +++\n src/foundry_mcp/core/background_task.py            |    7 +-\n src/foundry_mcp/core/batch_operations.py           |  169 +-\n src/foundry_mcp/core/capabilities.py               |   46 +-\n src/foundry_mcp/core/concurrency.py                |   33 +-\n src/foundry_mcp/core/context.py                    |   12 +-\n src/foundry_mcp/core/discovery.py                  | 1603 ------\n src/foundry_mcp/core/discovery/__init__.py         |   65 +\n src/foundry_mcp/core/discovery/capabilities.py     |  184 +\n src/foundry_mcp/core/discovery/deprecation.py      |  112 +\n src/foundry_mcp/core/discovery/flags.py            |   46 +\n .../core/discovery/metadata/__init__.py            |   31 +\n .../core/discovery/metadata/environment.py         |  270 ++\n src/foundry_mcp/core/discovery/metadata/llm.py     |  380 ++\n .../core/discovery/metadata/provider.py            |  327 ++\n src/foundry_mcp/core/discovery/registry.py         |  186 +\n src/foundry_mcp/core/discovery/types.py            |  179 +\n src/foundry_mcp/core/error_collection.py           |   53 +-\n src/foundry_mcp/core/error_store.py                |    2 +-\n src/foundry_mcp/core/errors/__init__.py            |  145 +\n src/foundry_mcp/core/errors/authorization.py       |   25 +\n src/foundry_mcp/core/errors/base.py                |  123 +\n src/foundry_mcp/core/errors/execution.py           |   42 +\n src/foundry_mcp/core/errors/llm.py                 |   97 +\n src/foundry_mcp/core/errors/provider.py            |  101 +\n src/foundry_mcp/core/errors/research.py            |  140 +\n src/foundry_mcp/core/errors/resilience.py          |   97 +\n src/foundry_mcp/core/errors/search.py              |   82 +\n src/foundry_mcp/core/errors/storage.py             |   56 +\n src/foundry_mcp/core/executor.py                   |   23 +-\n src/foundry_mcp/core/health.py                     |    6 +-\n src/foundry_mcp/core/hierarchy_helpers.py          |    8 +-\n src/foundry_mcp/core/intake.py                     |  933 ----\n src/foundry_mcp/core/journal.py                    |   97 +-\n src/foundry_mcp/core/lifecycle.py                  |   34 +-\n src/foundry_mcp/core/llm_config.py                 | 1419 ------\n src/foundry_mcp/core/llm_config/__init__.py        |   46 +\n src/foundry_mcp/core/llm_config/_paths.py          |   57 +\n src/foundry_mcp/core/llm_config/consultation.py    |  470 ++\n src/foundry_mcp/core/llm_config/provider_spec.py   |  144 +\n src/foundry_mcp/core/llm_config/workflow.py        |  289 ++\n src/foundry_mcp/core/llm_patterns.py               |   37 +-\n src/foundry_mcp/core/llm_provider.py               | 1569 ------\n src/foundry_mcp/core/logging_config.py             |    4 +-\n src/foundry_mcp/core/metrics/__init__.py           |   61 +\n src/foundry_mcp/core/metrics/persistence.py        |  576 +++\n src/foundry_mcp/core/metrics/registry.py           |  323 ++\n src/foundry_mcp/core/metrics/store.py              |  640 +++\n src/foundry_mcp/core/metrics_persistence.py        |  588 +--\n src/foundry_mcp/core/metrics_registry.py           |  333 +-\n src/foundry_mcp/core/metrics_store.py              |  646 +--\n src/foundry_mcp/core/modifications.py              |  105 +-\n src/foundry_mcp/core/naming.py                     |    2 +-\n src/foundry_mcp/core/observability.py              | 1218 -----\n src/foundry_mcp/core/observability/__init__.py     |   83 +\n src/foundry_mcp/core/observability/audit.py        |  189 +\n src/foundry_mcp/core/observability/decorators.py   |  431 ++\n src/foundry_mcp/core/observability/manager.py      |  238 +\n src/foundry_mcp/core/observability/metrics.py      |  153 +\n src/foundry_mcp/core/observability/otel.py         |  447 ++\n src/foundry_mcp/core/observability/prometheus.py   |  558 +++\n src/foundry_mcp/core/observability/redaction.py    |  179 +\n src/foundry_mcp/core/observability/stubs.py        |  259 +\n src/foundry_mcp/core/otel.py                       |  456 +-\n src/foundry_mcp/core/otel_stubs.py                 |  270 +-\n src/foundry_mcp/core/pagination.py                 |   24 +-\n src/foundry_mcp/core/progress.py                   |   42 +-\n src/foundry_mcp/core/prometheus.py                 |  570 +--\n src/foundry_mcp/core/prompts/__init__.py           |   23 +-\n src/foundry_mcp/core/prompts/fidelity_review.py    |   53 +-\n .../core/prompts/markdown_plan_review.py           |  250 +-\n src/foundry_mcp/core/prompts/plan_review.py        |  312 +-\n src/foundry_mcp/core/prompts/spec_review.py        |  257 +\n src/foundry_mcp/core/providers/__init__.py         |  134 +-\n src/foundry_mcp/core/providers/_claude_base.py     |   16 +-\n src/foundry_mcp/core/providers/base.py             |  113 +-\n src/foundry_mcp/core/providers/claude.py           |   10 +-\n src/foundry_mcp/core/providers/claude_zai.py       |   10 +-\n src/foundry_mcp/core/providers/codex.py            |   10 +-\n src/foundry_mcp/core/providers/cursor_agent.py     |    6 +-\n src/foundry_mcp/core/providers/detectors.py        |   17 +-\n src/foundry_mcp/core/providers/gemini.py           |    8 +-\n src/foundry_mcp/core/providers/opencode.py         |   23 +-\n src/foundry_mcp/core/providers/registry.py         |   19 +-\n src/foundry_mcp/core/providers/test_provider.py    |    1 -\n src/foundry_mcp/core/providers/validation.py       |   17 +-\n src/foundry_mcp/core/rate_limit.py                 |   51 +-\n src/foundry_mcp/core/research/__init__.py          |   32 +-\n src/foundry_mcp/core/research/content_archive.py   |   15 +-\n src/foundry_mcp/core/research/context_budget.py    | 2031 --------\n .../core/research/context_budget/__init__.py       |   80 +\n .../core/research/context_budget/constants.py      |   38 +\n .../research/context_budget/degradation_models.py  |  209 +\n .../context_budget/degradation_pipeline.py         |  772 +++\n .../core/research/context_budget/manager.py        |  603 +++\n .../core/research/context_budget/models.py         |  241 +\n .../core/research/context_budget/priority.py       |  147 +\n src/foundry_mcp/core/research/document_digest.py   | 2092 --------\n .../core/research/document_digest/__init__.py      |   37 +\n .../core/research/document_digest/cache.py         |  118 +\n .../research/document_digest/circuit_breaker.py    |  172 +\n .../core/research/document_digest/config.py        |  159 +\n .../core/research/document_digest/digestor.py      |  740 +++\n .../core/research/document_digest/evidence.py      |  470 ++\n .../core/research/document_digest/results.py       |  169 +\n .../research/document_digest/text_processing.py    |  384 ++\n src/foundry_mcp/core/research/memory.py            |   26 +-\n src/foundry_mcp/core/research/models.py            | 2176 ---------\n src/foundry_mcp/core/research/models/__init__.py   |  117 +\n src/foundry_mcp/core/research/models/consensus.py  |   75 +\n .../core/research/models/conversations.py          |   64 +\n .../core/research/models/deep_research.py          |  863 ++++\n src/foundry_mcp/core/research/models/digest.py     |  282 ++\n src/foundry_mcp/core/research/models/enums.py      |   49 +\n src/foundry_mcp/core/research/models/fidelity.py   |  260 +\n src/foundry_mcp/core/research/models/ideation.py   |   94 +\n src/foundry_mcp/core/research/models/sources.py    |  492 ++\n src/foundry_mcp/core/research/models/thinkdeep.py  |  108 +\n src/foundry_mcp/core/research/pdf_extractor.py     |  144 +-\n src/foundry_mcp/core/research/prompts/__init__.py  |    4 +-\n .../core/research/providers/__init__.py            |    6 +-\n src/foundry_mcp/core/research/providers/base.py    |  194 +-\n src/foundry_mcp/core/research/providers/google.py  |   40 +-\n .../core/research/providers/perplexity.py          |   89 +-\n .../core/research/providers/resilience.py          |  854 ----\n .../core/research/providers/resilience/__init__.py |   59 +\n .../core/research/providers/resilience/config.py   |   76 +\n .../research/providers/resilience/execution.py     |  380 ++\n .../core/research/providers/resilience/manager.py  |  236 +\n .../core/research/providers/resilience/models.py   |   79 +\n .../core/research/providers/resilience/retry.py    |   91 +\n .../core/research/providers/semantic_scholar.py    |   96 +-\n src/foundry_mcp/core/research/providers/shared.py  |   56 +-\n src/foundry_mcp/core/research/providers/tavily.py  |   62 +-\n .../core/research/providers/tavily_extract.py      |   98 +-\n src/foundry_mcp/core/research/state_migrations.py  |   30 +-\n .../core/research/summarization/__init__.py        |   73 +\n .../core/research/summarization/cache.py           |  185 +\n .../core/research/summarization/constants.py       |   15 +\n .../core/research/summarization/models.py          |  340 ++\n .../summarizer.py}                                 |  611 +--\n src/foundry_mcp/core/research/token_management.py  | 1002 ----\n .../core/research/token_management/__init__.py     |   87 +\n .../core/research/token_management/budget.py       |  124 +\n .../core/research/token_management/estimation.py   |  273 ++\n .../core/research/token_management/limits.py       |  157 +\n .../core/research/token_management/models.py       |   68 +\n .../core/research/token_management/preflight.py    |  261 +\n .../core/research/token_management/registry.py     |  110 +\n src/foundry_mcp/core/research/workflows/base.py    |   61 +-\n src/foundry_mcp/core/research/workflows/chat.py    |   11 +-\n .../core/research/workflows/consensus.py           |   22 +-\n .../research/workflows/deep_research/__init__.py   |   57 +-\n .../research/workflows/deep_research/_budgeting.py |   76 +-\n .../research/workflows/deep_research/_constants.py |    6 +\n .../research/workflows/deep_research/_helpers.py   |   14 +-\n .../workflows/deep_research/action_handlers.py     |  583 +++\n .../core/research/workflows/deep_research/audit.py |  138 +\n .../workflows/deep_research/background_tasks.py    |   45 +-\n .../core/research/workflows/deep_research/core.py  | 1483 +-----\n .../workflows/deep_research/error_handling.py      |  117 +\n .../workflows/deep_research/infrastructure.py      |  108 +-\n .../workflows/deep_research/orchestration.py       |  359 +-\n .../workflows/deep_research/persistence.py         |  208 +\n .../workflows/deep_research/phases/__init__.py     |   10 +-\n .../deep_research/phases/_analysis_digest.py       |  554 +++\n .../deep_research/phases/_analysis_parsing.py      |  277 ++\n .../deep_research/phases/_analysis_prompts.py      |  187 +\n .../deep_research/phases/_citation_postprocess.py  |  198 +\n .../workflows/deep_research/phases/_lifecycle.py   |  233 +\n .../workflows/deep_research/phases/analysis.py     | 1101 +----\n .../deep_research/phases/clarification.py          |  252 +\n .../workflows/deep_research/phases/gathering.py    |  238 +-\n .../workflows/deep_research/phases/planning.py     |  203 +-\n .../workflows/deep_research/phases/refinement.py   |  268 +-\n .../workflows/deep_research/phases/synthesis.py    |  298 +-\n .../deep_research/phases/topic_research.py         |  402 ++\n .../workflows/deep_research/session_management.py  |   58 +-\n .../workflows/deep_research/source_quality.py      |    4 +-\n .../workflows/deep_research/workflow_execution.py  |  645 +++\n src/foundry_mcp/core/research/workflows/ideate.py  |  272 +-\n .../core/research/workflows/thinkdeep.py           |  260 +-\n src/foundry_mcp/core/resilience.py                 |   75 +-\n src/foundry_mcp/core/responses.py                  | 1674 -------\n src/foundry_mcp/core/responses/__init__.py         |   89 +\n src/foundry_mcp/core/responses/batch_schemas.py    |  181 +\n src/foundry_mcp/core/responses/builders.py         |  158 +\n src/foundry_mcp/core/responses/errors_ai.py        |  269 ++\n src/foundry_mcp/core/responses/errors_generic.py   |  265 +\n src/foundry_mcp/core/responses/errors_spec.py      |  436 ++\n src/foundry_mcp/core/responses/sanitization.py     |   65 +\n src/foundry_mcp/core/responses/types.py            |  200 +\n src/foundry_mcp/core/review.py                     |   52 +-\n src/foundry_mcp/core/security.py                   |  104 +-\n src/foundry_mcp/core/spec/__init__.py              |   85 +-\n src/foundry_mcp/core/spec/_constants.py            |   15 +-\n src/foundry_mcp/core/spec/_monolith.py             |   60 +-\n src/foundry_mcp/core/spec/analysis.py              |   90 +-\n src/foundry_mcp/core/spec/hierarchy.py             |  605 +--\n src/foundry_mcp/core/spec/io.py                    |   85 +-\n src/foundry_mcp/core/spec/templates.py             |  805 ++--\n src/foundry_mcp/core/task/__init__.py              |   40 +-\n src/foundry_mcp/core/task/_helpers.py              |   69 +-\n src/foundry_mcp/core/task/batch.py                 |   69 +-\n src/foundry_mcp/core/task/mutations.py             |   68 +-\n src/foundry_mcp/core/task/queries.py               |  134 +-\n src/foundry_mcp/core/task_registry.py              |    6 +-\n src/foundry_mcp/core/timeout_watchdog.py           |   28 +-\n src/foundry_mcp/core/validation.py                 | 2342 ---------\n src/foundry_mcp/core/validation/__init__.py        |   67 +\n src/foundry_mcp/core/validation/application.py     |   82 +\n src/foundry_mcp/core/validation/constants.py       |   29 +\n src/foundry_mcp/core/validation/fixes.py           |  502 ++\n src/foundry_mcp/core/validation/input.py           |  101 +\n src/foundry_mcp/core/validation/models.py          |   84 +\n src/foundry_mcp/core/validation/normalization.py   |  115 +\n src/foundry_mcp/core/validation/rules.py           |  996 ++++\n src/foundry_mcp/core/validation/stats.py           |  128 +\n src/foundry_mcp/core/validation/verification.py    |  406 ++\n src/foundry_mcp/prompts/workflows.py               |   30 +-\n src/foundry_mcp/resources/specs.py                 |  391 +-\n src/foundry_mcp/schemas/__init__.py                |   10 +-\n ...d-spec-schema.json => foundry-spec-schema.json} |    8 -\n src/foundry_mcp/schemas/intake-schema.json         |   89 -\n src/foundry_mcp/server.py                          |   40 +-\n src/foundry_mcp/skills/__init__.py                 |   29 +\n src/foundry_mcp/skills/foundry_implement_v2.py     |  836 ++++\n src/foundry_mcp/tools/unified/__init__.py          |   14 +-\n src/foundry_mcp/tools/unified/authoring.py         |   16 +-\n .../tools/unified/authoring_handlers/__init__.py   |  243 +-\n .../tools/unified/authoring_handlers/_helpers.py   |   30 +-\n .../unified/authoring_handlers/handlers_intake.py  |  655 ---\n .../authoring_handlers/handlers_metadata.py        |  541 ++-\n .../unified/authoring_handlers/handlers_phase.py   |  852 +---\n .../unified/authoring_handlers/handlers_spec.py    |  376 +-\n src/foundry_mcp/tools/unified/common.py            |  232 +-\n src/foundry_mcp/tools/unified/context_helpers.py   |   13 +-\n .../tools/unified/documentation_helpers.py         |  394 +-\n src/foundry_mcp/tools/unified/environment.py       |  179 +-\n src/foundry_mcp/tools/unified/error.py             |   25 +-\n src/foundry_mcp/tools/unified/health.py            |   32 +-\n src/foundry_mcp/tools/unified/journal.py           |   98 +-\n src/foundry_mcp/tools/unified/lifecycle.py         |  412 +-\n src/foundry_mcp/tools/unified/param_schema.py      |  322 ++\n src/foundry_mcp/tools/unified/plan.py              |  230 +-\n src/foundry_mcp/tools/unified/provider.py          |  243 +-\n src/foundry_mcp/tools/unified/research.py          | 1733 +------\n .../tools/unified/research_handlers/__init__.py    |  286 ++\n .../tools/unified/research_handlers/_helpers.py    |   89 +\n .../research_handlers/handlers_deep_research.py    |  309 ++\n .../unified/research_handlers/handlers_extract.py  |  407 ++\n .../research_handlers/handlers_spec_nodes.py       |  383 ++\n .../unified/research_handlers/handlers_threads.py  |  129 +\n .../research_handlers/handlers_workflows.py        |  285 ++\n src/foundry_mcp/tools/unified/review.py            |  708 ++-\n src/foundry_mcp/tools/unified/review_helpers.py    |  159 +-\n src/foundry_mcp/tools/unified/router.py            |   16 +-\n src/foundry_mcp/tools/unified/server.py            |  141 +-\n src/foundry_mcp/tools/unified/spec.py              |  193 +-\n src/foundry_mcp/tools/unified/task.py              |   36 +-\n .../tools/unified/task_handlers/__init__.py        |  324 +-\n .../tools/unified/task_handlers/_helpers.py        |  670 ++-\n .../tools/unified/task_handlers/_session_common.py |  579 +++\n .../tools/unified/task_handlers/handlers_batch.py  |  381 +-\n .../unified/task_handlers/handlers_lifecycle.py    |  499 +-\n .../unified/task_handlers/handlers_mutation.py     |  809 ++--\n .../tools/unified/task_handlers/handlers_query.py  |  497 +-\n .../unified/task_handlers/handlers_session.py      |   83 +\n .../task_handlers/handlers_session_lifecycle.py    | 1093 +++++\n .../task_handlers/handlers_session_query.py        |  550 +++\n .../task_handlers/handlers_session_rebase.py       |  747 +++\n .../unified/task_handlers/handlers_session_step.py |  985 ++++\n src/foundry_mcp/tools/unified/verification.py      |  192 +-\n tests/conftest.py                                  |   11 +-\n tests/contract/response_schema.json                |    2 -\n tests/contract/test_response_schema.py             |   30 +-\n tests/core/research/providers/conftest.py          |    1 -\n tests/core/research/providers/test_perplexity.py   |  160 +-\n .../providers/test_provider_characterization.py    |  133 +-\n tests/core/research/providers/test_resilience.py   |   26 +-\n .../research/providers/test_semantic_scholar.py    |   13 +-\n tests/core/research/providers/test_shared.py       |    8 +-\n tests/core/research/providers/test_shared_utils.py |  269 ++\n tests/core/research/providers/test_tavily.py       |   62 +-\n .../core/research/providers/test_tavily_extract.py |  258 +-\n tests/core/research/test_content_archive.py        |    7 +-\n tests/core/research/test_context_budget.py         |   88 +-\n tests/core/research/test_deep_research_digest.py   |  242 +-\n .../test_deep_research_token_integration.py        |  143 +-\n tests/core/research/test_document_digest.py        |  125 +-\n tests/core/research/test_graceful_degradation.py   |   12 +-\n tests/core/research/test_pdf_extractor.py          |   70 +-\n tests/core/research/test_proactive_digest.py       |  414 ++\n tests/core/research/test_summarization.py          |   39 +-\n tests/core/research/test_token_management.py       |   81 +-\n tests/core/research/workflows/conftest.py          |   20 +\n tests/core/research/workflows/test_chat.py         |   29 +-\n .../research/workflows/test_citation_tracking.py   |  365 ++\n .../core/research/workflows/test_clarification.py  |  639 +++\n tests/core/research/workflows/test_consensus.py    |   21 +-\n .../workflows/test_contradiction_detection.py      |  736 +++\n .../core/research/workflows/test_deep_research.py  |  431 +-\n .../workflows/test_deep_research_lifecycle.py      |  538 +++\n tests/core/research/workflows/test_ideate.py       |   23 +-\n .../research/workflows/test_input_validation.py    |  344 ++\n .../research/workflows/test_parse_edge_cases.py    |  691 +++\n .../research/workflows/test_phase_lifecycle.py     |  531 ++\n tests/core/research/workflows/test_reflection.py   |  756 +++\n tests/core/research/workflows/test_thinkdeep.py    |   23 +-\n .../research/workflows/test_timeout_fallback.py    |  381 ++\n .../research/workflows/test_timeout_resilience.py  |    2 +-\n .../core/research/workflows/test_topic_research.py | 1050 ++++\n tests/fixtures/intake/README.md                    |   58 -\n tests/fixtures/intake/edge_cases.jsonl             |   13 -\n tests/fixtures/intake/malformed.jsonl              |   12 -\n tests/fixtures/intake/sample_items.jsonl           |    6 -\n tests/integration/conftest.py                      |   33 +\n tests/integration/providers/conftest.py            |   13 +-\n .../providers/test_fidelity_review_flow.py         |    5 +-\n .../integration/providers/test_plan_review_flow.py |    9 +-\n tests/integration/providers/test_provider_smoke.py |   40 +-\n tests/integration/providers/test_router_smoke.py   |   13 +-\n tests/integration/providers/test_synthesis_flow.py |  278 +-\n tests/integration/test_ai_consultation_e2e.py      |  177 +-\n tests/integration/test_authoring_tools.py          |  103 +-\n tests/integration/test_deep_research_resilience.py |   13 +-\n tests/integration/test_deep_research_tavily.py     |   69 +-\n tests/integration/test_environment_tools.py        |   80 +-\n tests/integration/test_fallback_integration.py     |  295 +-\n ...dd_cli_parity.py => test_foundry_cli_parity.py} |   69 +-\n .../test_foundry_implement_v2_unattended.py        |  176 +\n tests/integration/test_json_minification.py        |   36 +-\n tests/integration/test_mcp_smoke.py                |   29 +-\n tests/integration/test_mcp_tools.py                |   46 +-\n tests/integration/test_notifications_sampling.py   |   91 +-\n tests/integration/test_prepare_task_cli.py         |   18 +-\n tests/integration/test_provider_tools.py           |   34 +-\n tests/integration/test_research_e2e.py             |  173 +-\n tests/integration/test_sdd_cli_advanced.py         |   20 +-\n tests/property/test_input_validation.py            |  222 +-\n tests/test_responses.py                            |   74 +-\n tests/tools/unified/conftest.py                    |   12 +\n tests/tools/unified/test_authoring.py              |   74 +-\n tests/tools/unified/test_authoring_schema.py       |   40 +\n tests/tools/unified/test_common.py                 |  267 +-\n tests/tools/unified/test_dispatch_common.py        |  203 +-\n tests/tools/unified/test_documentation_helpers.py  |  747 +++\n tests/tools/unified/test_environment.py            |   26 +-\n tests/tools/unified/test_error.py                  |   26 +-\n tests/tools/unified/test_health.py                 |   78 +-\n tests/tools/unified/test_journal.py                |   26 +-\n tests/tools/unified/test_lifecycle.py              |  137 +-\n tests/tools/unified/test_param_schema.py           |  503 ++\n tests/tools/unified/test_plan.py                   |   94 +-\n tests/tools/unified/test_provider.py               |   26 +-\n tests/tools/unified/test_research.py               |  254 +-\n tests/tools/unified/test_review.py                 |   74 +-\n tests/tools/unified/test_review_persistence.py     |  270 ++\n tests/tools/unified/test_server.py                 |   96 +-\n tests/tools/unified/test_spec.py                   |   26 +-\n tests/tools/unified/test_task.py                   |   26 +-\n tests/tools/unified/test_task_action_shapes.py     |  231 +\n tests/tools/unified/test_telemetry_invariants.py   |  148 +-\n .../tools/unified/test_tool_registration_parity.py |   29 +-\n tests/tools/unified/test_update_metadata_alias.py  |  111 +\n tests/tools/unified/test_verification.py           |   74 +-\n tests/unit/core/test_review.py                     |    7 +-\n tests/unit/test_ai_consultation.py                 |  177 +-\n tests/unit/test_batch_operations.py                |   58 +-\n .../empty.jsonl => unit/test_cli/__init__.py}      |    0\n tests/unit/test_cli/conftest.py                    |   39 +\n tests/unit/test_cli/test_run.py                    |  131 +\n tests/unit/test_cli/test_stop.py                   |  218 +\n tests/unit/test_cli/test_watch.py                  |  358 ++\n tests/unit/test_cli_review_helpers.py              |   26 +-\n tests/unit/test_config_hierarchy.py                |  393 +-\n tests/unit/test_config_perplexity.py               |   78 +-\n tests/unit/test_config_tavily.py                   |  118 +-\n tests/unit/test_contracts/conftest.py              |   16 +\n tests/unit/test_contracts/test_phase3_contracts.py |   46 +-\n tests/unit/test_contracts/test_phase4_contracts.py |   48 +-\n tests/unit/test_contracts/test_phase5_contracts.py |   52 +-\n tests/unit/test_contracts/test_phase6_contracts.py |   57 +-\n tests/unit/test_contracts/test_phase7_contracts.py |   24 +-\n tests/unit/test_core/autonomy/__init__.py          |    0\n tests/unit/test_core/autonomy/conftest.py          |  245 +\n .../test_core/autonomy/test_authorization_audit.py |   30 +\n .../test_core/autonomy/test_concurrency_scale.py   |  354 ++\n .../test_core/autonomy/test_context_tracker.py     |  735 +++\n .../autonomy/test_deprecation_enforcement.py       |   67 +\n tests/unit/test_core/autonomy/test_error_paths.py  |  722 +++\n .../test_core/autonomy/test_handlers_session.py    | 2954 ++++++++++++\n .../autonomy/test_handlers_session_step.py         | 1554 ++++++\n tests/unit/test_core/autonomy/test_integration.py  | 1064 ++++\n .../autonomy/test_loop_signal_exhaustive.py        |  109 +\n tests/unit/test_core/autonomy/test_memory.py       |  931 ++++\n .../test_core/autonomy/test_model_validators.py    |  117 +\n tests/unit/test_core/autonomy/test_orchestrator.py | 3058 ++++++++++++\n .../autonomy/test_reason_detail_validation.py      |   39 +\n tests/unit/test_core/autonomy/test_spec_adapter.py |  331 ++\n tests/unit/test_core/autonomy/test_spec_hash.py    |  283 ++\n .../test_core/autonomy/test_storage_integration.py |  398 ++\n tests/unit/test_core/autonomy/test_write_lock.py   |  391 ++\n tests/unit/test_core/conftest.py                   |   16 +\n .../research/test_deep_research_public_api.py      |   22 +-\n .../test_core/research/test_heartbeat_timing.py    |   75 +-\n tests/unit/test_core/research/test_memory.py       |   33 +-\n tests/unit/test_core/research/test_models.py       |   32 +-\n .../test_core/research/test_partial_results.py     |    6 +-\n .../research/test_status_timeout_metadata.py       |   14 +-\n tests/unit/test_core/research/test_workflows.py    |  195 +-\n tests/unit/test_core/test_authorization.py         |  550 +++\n tests/unit/test_core/test_background_task.py       |    1 +\n tests/unit/test_core/test_cancellation_timing.py   |   11 +-\n tests/unit/test_core/test_concurrency.py           |   31 +-\n tests/unit/test_core/test_discovery.py             |   45 +-\n tests/unit/test_core/test_executor.py              |   27 +-\n tests/unit/test_core/test_intake.py                |  821 ----\n tests/unit/test_core/test_journal.py               |   26 +-\n tests/unit/test_core/test_lifecycle.py             |   18 +-\n tests/unit/test_core/test_llm_patterns.py          |   12 +-\n tests/unit/test_core/test_pagination.py            |    6 +-\n tests/unit/test_core/test_phase_metadata_update.py |   99 +-\n tests/unit/test_core/test_provider_spec.py         |  111 +-\n tests/unit/test_core/test_resilience.py            |   61 +-\n tests/unit/test_core/test_security.py              |   46 +-\n tests/unit/test_core/test_spec.py                  |  665 +--\n tests/unit/test_core/test_spec_find_replace.py     |  112 +-\n tests/unit/test_core/test_spec_history.py          |   53 +-\n tests/unit/test_core/test_spec_plan_linkage.py     |  216 +\n tests/unit/test_core/test_spec_public_api.py       |  233 +-\n tests/unit/test_core/test_spec_validation.py       |   41 +-\n tests/unit/test_core/test_task.py                  |  282 +-\n tests/unit/test_core/test_task_batch_update.py     |   16 +-\n tests/unit/test_core/test_task_helpers.py          |   74 +\n tests/unit/test_core/test_task_public_api.py       |  155 +-\n tests/unit/test_core/test_task_registry.py         |    4 +-\n tests/unit/test_core/test_timeout_watchdog.py      |   86 +-\n tests/unit/test_core/test_validation.py            |  154 +-\n tests/unit/test_disabled_tools.py                  |   16 +-\n tests/unit/test_environment.py                     |  285 +-\n tests/unit/test_error_collection.py                |    5 +-\n tests/unit/test_fix_verification_types.py          |  203 +-\n ...st_sdd_cli_core.py => test_foundry_cli_core.py} |  169 +-\n ..._cli_runtime.py => test_foundry_cli_runtime.py} |    5 +-\n tests/unit/test_golden_fixtures.py                 |    3 +-\n tests/unit/test_llm_provider.py                    |  875 ----\n tests/unit/test_metrics_persistence.py             |  307 +-\n tests/unit/test_observability_graceful.py          |   15 +-\n tests/unit/test_phase_add_bulk.py                  |  212 +-\n tests/unit/test_providers_base.py                  |   27 +-\n tests/unit/test_providers_detectors.py             |   68 +-\n tests/unit/test_providers_implementations.py       |   69 +-\n tests/unit/test_providers_registry.py              |   13 +-\n tests/unit/test_review.py                          |   23 +-\n tests/unit/test_review_fidelity.py                 |  525 ++\n tests/unit/test_server_rate_limit.py               |   39 +\n .../unit/test_skills/test_foundry_implement_v2.py  |  527 ++\n tests/unit/test_task_metadata_batch.py             |  186 +-\n tests/unit/test_transcript.py                      |   16 +-\n 614 files changed, 88113 insertions(+), 116492 deletions(-)\n","truncated":false}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ^^^^^
NameError: name 'false' is not defined. Did you mean: 'False'?
