Traceback (most recent call last):
  File "/tmp/tmp.b8vgPBRQUI", line 1, in <module>
    {"exit_code":0,"stderr":"","stdout":"diff --git a/CHANGELOG.md b/CHANGELOG.md\nindex a30128a..b7fbd9b 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -5,6 +5,26 @@ All notable changes to this project will be documented in this file.\n The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),\n and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n \n+## [0.16.0] - 2026-02-22\n+\n+### Added\n+\n+- **Query clarification phase**: Optional `CLARIFICATION` phase runs before planning to analyze query completeness. Sends the query to a fast model that identifies whether clarification is needed and generates 1-3 disambiguating questions. User answers (or skips) feed constraints into the planning phase for more focused sub-query generation. Enabled by default (`deep_research_allow_clarification = true`).\n+- **LLM-driven supervisor reflection**: Opt-in LLM reflection at phase boundaries (`deep_research_enable_reflection`). After each phase completes, a fast model evaluates results and returns a structured quality assessment with proceed/adjust decisions. Coexists with existing heuristic quality gates \u2014 reflection runs alongside, not instead of, hardcoded thresholds. Reflection decisions are recorded in the audit trail.\n+- **Parallel topic researcher agents**: Opt-in per-topic ReAct loops in the gathering phase (`deep_research_enable_topic_agents`). Each sub-query spawns an independent mini-loop: search \u2192 reflect \u2192 refine \u2192 search, up to `deep_research_topic_max_searches` iterations. Topic researchers run in parallel (bounded by `max_concurrent`), produce per-topic summaries, and deduplicate sources across researchers.\n+- **Proactive content digest policy**: New `\"proactive\"` option for `deep_research_digest_policy`. When set, the digest pipeline runs on every source immediately after retrieval in the gathering phase (not deferred to analysis), ensuring uniform pre-processed content for downstream phases.\n+- **Contradiction detection in analysis**: After findings extraction, an LLM identifies conflicting claims between sources. Each contradiction includes finding IDs, description, resolution suggestion, preferred source, and severity (major/minor). Contradictions are stored in state and surfaced in the synthesis prompt so the final report addresses them explicitly.\n+- **End-to-end citation tracking**: Sources receive stable citation numbers (1-indexed) on entry. The synthesis prompt presents findings with `[N]` markers, instructs the LLM to use inline citations, and a `## Sources` section is auto-generated from state (not LLM output). Post-processing verifies citation consistency and removes dangling references. Citations survive refinement iterations.\n+\n+### Changed\n+\n+- `DeepResearchPhase` enum: added `CLARIFICATION` phase\n+- `AgentRole` enum: added `CLARIFIER` role\n+- `DeepResearchState`: added `clarification_constraints`, `contradictions`, and per-source `citation_number` fields\n+- `DigestPolicy` enum: added `PROACTIVE` variant\n+- Synthesis prompt: now includes contradiction context and citation legend\n+- Document digest policy validation: accepts `\"proactive\"` alongside `\"off\"`, `\"auto\"`, `\"always\"`\n+\n ## [0.15.0] - 2026-02-22\n \n ### Added\ndiff --git a/PLAN-CHECKLIST.md b/PLAN-CHECKLIST.md\nindex 4a32598..267099b 100644\n--- a/PLAN-CHECKLIST.md\n+++ b/PLAN-CHECKLIST.md\n@@ -85,54 +85,54 @@ Tracks progress against [PLAN.md](./PLAN.md). Check items as completed.\n ## Phase 3: Advanced\n \n ### 3. Parallel Sub-Topic Researcher Agents\n-- [ ] Design `TopicResearchResult` model:\n-  - [ ] `sub_query_id`, `searches_performed`, `sources_found`, `per_topic_summary`\n-  - [ ] `reflection_notes` (from per-topic reflect step)\n-- [ ] Create `phases/topic_research.py` with `TopicResearchMixin`:\n-  - [ ] `_execute_topic_research_async(sub_query)` \u2014 single topic ReAct loop\n-  - [ ] `_topic_search()` \u2014 search scoped to one sub-query\n-  - [ ] `_topic_reflect()` \u2014 fast LLM evaluates results, suggests refinement\n-  - [ ] Loop: search \u2192 reflect \u2192 (refine query \u2192 search)* \u2192 compile summary\n-  - [ ] Max iterations per topic: configurable (`deep_research_topic_max_searches`)\n-- [ ] Modify `phases/gathering.py`:\n-  - [ ] When `deep_research_enable_topic_agents = true`, delegate to topic researchers\n-  - [ ] Run topic researchers in parallel with `asyncio.gather()` + semaphore\n-  - [ ] Collect `TopicResearchResult` per sub-query\n-  - [ ] Merge sources and per-topic summaries into state\n-- [ ] Budget splitting: divide search budget across sub-queries\n-- [ ] Add config keys:\n-  - [ ] `deep_research_enable_topic_agents` (default: `false`)\n-  - [ ] `deep_research_topic_max_searches` (default: `3`)\n-  - [ ] `deep_research_topic_reflection_provider`\n-- [ ] Per-topic audit events\n-- [ ] Unit tests: single topic research loop\n-- [ ] Integration test: multi-topic parallel execution\n-- [ ] Verify deduplication across topic researchers\n+- [x] Design `TopicResearchResult` model:\n+  - [x] `sub_query_id`, `searches_performed`, `sources_found`, `per_topic_summary`\n+  - [x] `reflection_notes` (from per-topic reflect step)\n+- [x] Create `phases/topic_research.py` with `TopicResearchMixin`:\n+  - [x] `_execute_topic_research_async(sub_query)` \u2014 single topic ReAct loop\n+  - [x] `_topic_search()` \u2014 search scoped to one sub-query\n+  - [x] `_topic_reflect()` \u2014 fast LLM evaluates results, suggests refinement\n+  - [x] Loop: search \u2192 reflect \u2192 (refine query \u2192 search)* \u2192 compile summary\n+  - [x] Max iterations per topic: configurable (`deep_research_topic_max_searches`)\n+- [x] Modify `phases/gathering.py`:\n+  - [x] When `deep_research_enable_topic_agents = true`, delegate to topic researchers\n+  - [x] Run topic researchers in parallel with `asyncio.gather()` + semaphore\n+  - [x] Collect `TopicResearchResult` per sub-query\n+  - [x] Merge sources and per-topic summaries into state\n+- [x] Budget splitting: divide search budget across sub-queries\n+- [x] Add config keys:\n+  - [x] `deep_research_enable_topic_agents` (default: `false`)\n+  - [x] `deep_research_topic_max_searches` (default: `3`)\n+  - [x] `deep_research_topic_reflection_provider`\n+- [x] Per-topic audit events\n+- [x] Unit tests: single topic research loop\n+- [x] Integration test: multi-topic parallel execution\n+- [x] Verify deduplication across topic researchers\n \n ### 5. Contradiction Detection\n-- [ ] Add `Contradiction` model to `models/deep_research.py`:\n-  - [ ] `id`, `finding_ids: list[str]`, `description`, `resolution`, `preferred_source_id`\n-  - [ ] `severity: str` (major/minor)\n-- [ ] Add `contradictions: list[Contradiction]` to `DeepResearchState`\n-- [ ] Add post-analysis contradiction detection in `phases/analysis.py`:\n-  - [ ] After findings extraction, send findings to LLM\n-  - [ ] System prompt: identify conflicting claims between findings\n-  - [ ] Parse structured JSON response\n-  - [ ] Store contradictions in state\n-- [ ] Update `phases/synthesis.py`:\n-  - [ ] Include contradictions section in synthesis prompt\n-  - [ ] Instruct LLM to address contradictions explicitly in report\n-  - [ ] Suggest resolution approach (prefer higher-quality source, note uncertainty)\n-- [ ] Optionally create contradiction-type gaps for refinement\n-- [ ] Audit events for detected contradictions\n-- [ ] Unit tests for contradiction parsing\n-- [ ] Integration test: contradictory sources \u2192 report addresses them\n+- [x] Add `Contradiction` model to `models/deep_research.py`:\n+  - [x] `id`, `finding_ids: list[str]`, `description`, `resolution`, `preferred_source_id`\n+  - [x] `severity: str` (major/minor)\n+- [x] Add `contradictions: list[Contradiction]` to `DeepResearchState`\n+- [x] Add post-analysis contradiction detection in `phases/analysis.py`:\n+  - [x] After findings extraction, send findings to LLM\n+  - [x] System prompt: identify conflicting claims between findings\n+  - [x] Parse structured JSON response\n+  - [x] Store contradictions in state\n+- [x] Update `phases/synthesis.py`:\n+  - [x] Include contradictions section in synthesis prompt\n+  - [x] Instruct LLM to address contradictions explicitly in report\n+  - [x] Suggest resolution approach (prefer higher-quality source, note uncertainty)\n+- [x] Optionally create contradiction-type gaps for refinement\n+- [x] Audit events for detected contradictions\n+- [x] Unit tests for contradiction parsing\n+- [x] Integration test: contradictory sources \u2192 report addresses them\n \n ---\n \n ## Cross-Cutting\n \n-- [ ] Update `.foundry-mcp.toml` with all new config keys (with comments)\n-- [ ] Update foundry-sandbox config documentation (`docs/configuration.md`)\n-- [ ] Run full test suite after each phase completion\n-- [ ] Update CHANGELOG.md with new capabilities\n+- [x] Update `.foundry-mcp.toml` with all new config keys (with comments)\n+- [x] Update foundry-sandbox config documentation (`docs/configuration.md`)\n+- [x] Run full test suite after each phase completion\n+- [x] Update CHANGELOG.md with new capabilities\ndiff --git a/docs/06-configuration.md b/docs/06-configuration.md\nindex 275335e..cba4fdb 100644\n--- a/docs/06-configuration.md\n+++ b/docs/06-configuration.md\n@@ -261,7 +261,7 @@ while preserving key information.\n \n | Setting | Type | Default | Description |\n |---------|------|---------|-------------|\n-| `deep_research_digest_policy` | string | `\"auto\"` | When to digest: `\"off\"`, `\"auto\"`, `\"always\"` |\n+| `deep_research_digest_policy` | string | `\"auto\"` | When to digest: `\"off\"`, `\"auto\"`, `\"always\"`, `\"proactive\"` |\n | `deep_research_digest_min_chars` | int | `500` | Minimum content length to trigger digest |\n | `deep_research_digest_max_sources` | int | `50` | Maximum sources to digest per iteration |\n | `deep_research_digest_timeout` | float | `120.0` | Timeout per digest operation (seconds) |\n@@ -280,6 +280,7 @@ while preserving key information.\n | `off` | Never digest - all sources pass through unchanged |\n | `auto` | Digest HIGH/MEDIUM quality sources above size threshold |\n | `always` | Always digest sources with content |\n+| `proactive` | Digest every source immediately at retrieval time in the gathering phase, ensuring uniform content for downstream analysis |\n \n #### Content Archival\n \n@@ -316,6 +317,106 @@ deep_research_archive_content = true\n deep_research_archive_retention_days = 60\n ```\n \n+### Query Clarification\n+\n+Before research begins, an optional clarification phase analyzes the query\n+for completeness and asks the user to disambiguate scope, timeframe, or domain\n+preferences. If the user skips clarification, research proceeds with the\n+original query.\n+\n+| Setting | Type | Default | Description |\n+|---------|------|---------|-------------|\n+| `deep_research_allow_clarification` | bool | `true` | Enable the clarification phase before planning |\n+| `deep_research_clarification_provider` | string | `null` | LLM provider for clarification (uses `default_provider` if not set) |\n+\n+When enabled, the clarification step sends the query to a fast model that returns\n+structured JSON indicating whether the query needs clarification and what questions\n+to ask. Constraints inferred from the user's answers are fed into the planning\n+phase for more focused sub-query generation.\n+\n+```toml\n+[research]\n+deep_research_allow_clarification = true\n+# Use a fast/cheap model for the single clarification call\n+deep_research_clarification_provider = \"[cli]gemini:flash\"\n+```\n+\n+### LLM-Driven Supervisor Reflection\n+\n+After each phase completes, an optional LLM reflection step evaluates phase\n+results and decides whether quality is sufficient to proceed. This coexists\n+with (does not replace) the existing heuristic quality gates.\n+\n+| Setting | Type | Default | Description |\n+|---------|------|---------|-------------|\n+| `deep_research_enable_reflection` | bool | `false` | Enable LLM reflection at phase boundaries |\n+| `deep_research_reflection_provider` | string | `null` | LLM provider for reflection (uses `default_provider` if not set) |\n+| `deep_research_reflection_timeout` | float | `60.0` | Timeout per reflection call in seconds |\n+\n+The reflection LLM returns a structured assessment: quality rating, whether to\n+proceed, suggested adjustments, and rationale. Reflection decisions are recorded\n+in the audit trail.\n+\n+```toml\n+[research]\n+deep_research_enable_reflection = true\n+deep_research_reflection_provider = \"[cli]gemini:flash\"\n+deep_research_reflection_timeout = 60.0\n+```\n+\n+### Parallel Topic Researcher Agents\n+\n+When enabled, each sub-query in the gathering phase runs its own mini ReAct\n+loop instead of a single flat search. Each topic researcher independently\n+searches, reflects on coverage gaps, refines its query, and searches again\n+until it has sufficient information or reaches the iteration limit. Topic\n+researchers run in parallel, bounded by `deep_research_max_concurrent`.\n+\n+| Setting | Type | Default | Description |\n+|---------|------|---------|-------------|\n+| `deep_research_enable_topic_agents` | bool | `false` | Enable per-topic ReAct loops in the gathering phase |\n+| `deep_research_topic_max_searches` | int | `3` | Maximum search iterations per topic |\n+| `deep_research_topic_reflection_provider` | string | `null` | LLM provider for per-topic reflection (uses `default_provider` if not set) |\n+\n+Per-topic summaries are compiled and fed into the analysis phase, providing\n+more coherent per-topic coverage than flat parallel search. Sources are\n+deduplicated across topic researchers.\n+\n+```toml\n+[research]\n+deep_research_enable_topic_agents = true\n+deep_research_topic_max_searches = 3\n+deep_research_topic_reflection_provider = \"[cli]gemini:flash\"\n+```\n+\n+### Contradiction Detection\n+\n+After the analysis phase extracts findings, a contradiction detection step\n+identifies conflicting claims between sources. Detected contradictions are\n+stored in research state and surfaced in the synthesis prompt so the final\n+report can address them explicitly.\n+\n+Contradiction detection runs automatically when findings are extracted \u2014\n+there is no separate config toggle. Each contradiction includes the conflicting\n+finding IDs, a description, a resolution suggestion, the preferred source,\n+and a severity rating (major/minor).\n+\n+### Citation Tracking\n+\n+Deep research assigns each source a stable citation number (1-indexed) when\n+it enters the research state. The synthesis phase presents findings with\n+`[N]` citation markers, and the LLM is instructed to use inline citations\n+in the report. A `## Sources` section is auto-generated from the state\n+(not from LLM output) and appended to the report.\n+\n+Post-processing verifies citation consistency:\n+- All referenced `[N]` numbers exist in sources\n+- Dangling citations (referencing non-existent sources) are removed\n+- Unreferenced sources are logged as warnings\n+\n+Citation numbers survive refinement iterations \u2014 re-synthesis preserves\n+the same numbering scheme.\n+\n ### Audit Verbosity\n \n The `audit_verbosity` setting controls the size of JSONL audit payloads written during deep research workflows. This can reduce CPU spent on large audit writes while maintaining schema stability for downstream analysis tools.\ndiff --git a/samples/foundry-mcp.toml b/samples/foundry-mcp.toml\nindex 611a883..54fe293 100644\n--- a/samples/foundry-mcp.toml\n+++ b/samples/foundry-mcp.toml\n@@ -431,6 +431,54 @@ deep_research_providers = [\n     \"semantic_scholar\"\n ]\n \n+# -----------------------------------------------------------------------------\n+# Query Clarification Phase\n+# -----------------------------------------------------------------------------\n+# Before research begins, an optional clarification step analyzes the query\n+# for completeness and asks the user to disambiguate scope/timeframe/domain.\n+# If the user doesn't answer, research proceeds with the original query.\n+\n+# Master switch for clarification phase (runs before planning)\n+deep_research_allow_clarification = true\n+\n+# LLM provider for clarification (uses default_provider if not set)\n+# Recommend a fast/cheap model since this is a single quick LLM call\n+# deep_research_clarification_provider = \"[cli]gemini:flash\"\n+\n+# -----------------------------------------------------------------------------\n+# LLM-Driven Supervisor Reflection\n+# -----------------------------------------------------------------------------\n+# After each phase completes, an LLM evaluates phase results and decides\n+# whether quality is sufficient to proceed. Coexists with (does not replace)\n+# the existing heuristic quality gates.\n+\n+# Master switch for LLM reflection at phase boundaries (opt-in)\n+deep_research_enable_reflection = false\n+\n+# LLM provider for reflection calls (uses default_provider if not set)\n+# Recommend a fast model \u2014 reflection is a quick structured-output call\n+# deep_research_reflection_provider = \"[cli]gemini:flash\"\n+\n+# Timeout per reflection call in seconds\n+deep_research_reflection_timeout = 60.0\n+\n+# -----------------------------------------------------------------------------\n+# Parallel Topic Researcher Agents\n+# -----------------------------------------------------------------------------\n+# When enabled, each sub-query in the gathering phase runs its own mini\n+# ReAct loop: search \u2192 reflect \u2192 refine \u2192 search \u2192 ... \u2192 compile summary.\n+# Topic researchers run in parallel (bounded by max_concurrent) and produce\n+# per-topic summaries that feed into the analysis phase.\n+\n+# Master switch for per-topic ReAct loops in gathering\n+deep_research_enable_topic_agents = false\n+\n+# Max search iterations per topic (ReAct loop limit)\n+deep_research_topic_max_searches = 3\n+\n+# LLM provider for per-topic reflection (uses default_provider if not set)\n+# deep_research_topic_reflection_provider = \"[cli]gemini:flash\"\n+\n # -----------------------------------------------------------------------------\n # Per-Phase Timeouts (override deep_research_timeout)\n # Minimum recommended: 600s per operation for AI CLI providers\n@@ -653,9 +701,11 @@ tavily_extract_max_urls = 5\n # preserving essential information.\n \n # Digest policy: controls when digestion is applied\n-# - \"off\"    : Never digest content (preserve raw text)\n-# - \"auto\"   : Digest when content exceeds min_chars threshold (default)\n-# - \"always\" : Always digest eligible sources regardless of size\n+# - \"off\"       : Never digest content (preserve raw text)\n+# - \"auto\"      : Digest when content exceeds min_chars threshold (default)\n+# - \"always\"    : Always digest eligible sources regardless of size\n+# - \"proactive\" : Digest every source immediately at retrieval time in the\n+#                 gathering phase, ensuring uniform content for analysis\n deep_research_digest_policy = \"auto\"\n \n # Minimum character count before digest is applied (auto mode only)\ndiff --git a/src/foundry_mcp/core/research/workflows/deep_research/phases/gathering.py b/src/foundry_mcp/core/research/workflows/deep_research/phases/gathering.py\nindex 8cb8a70..c128dbd 100644\n--- a/src/foundry_mcp/core/research/workflows/deep_research/phases/gathering.py\n+++ b/src/foundry_mcp/core/research/workflows/deep_research/phases/gathering.py\n@@ -398,6 +398,19 @@ class GatheringPhaseMixin:\n         if getattr(self.config, \"deep_research_enable_topic_agents\", False):\n             topic_max_searches = getattr(self.config, \"deep_research_topic_max_searches\", 3)\n \n+            # Budget splitting: divide max_sources_per_query across topic agents\n+            # so the aggregate source count stays within a reasonable bound.\n+            # Each topic gets at least 2 results per provider call.\n+            num_topics = max(1, len(pending_queries))\n+            per_topic_max_sources = max(2, state.max_sources_per_query // num_topics)\n+\n+            logger.info(\n+                \"Topic agent budget: %d topics, %d sources/provider/topic (total budget %d)\",\n+                num_topics,\n+                per_topic_max_sources,\n+                state.max_sources_per_query,\n+            )\n+\n             self._check_cancellation(state)\n \n             async def run_topic_agent(sq):\n@@ -406,6 +419,7 @@ class GatheringPhaseMixin:\n                     state=state,\n                     available_providers=available_providers,\n                     max_searches=topic_max_searches,\n+                    max_sources_per_provider=per_topic_max_sources,\n                     timeout=timeout,\n                     seen_urls=seen_urls,\n                     seen_titles=seen_titles,\n@@ -457,6 +471,7 @@ class GatheringPhaseMixin:\n                     \"circuit_breaker_states_end\": circuit_breaker_states_end,\n                     \"topic_agents_enabled\": True,\n                     \"topic_max_searches\": topic_max_searches,\n+                    \"per_topic_max_sources\": per_topic_max_sources,\n                 },\n             )\n \ndiff --git a/src/foundry_mcp/core/research/workflows/deep_research/phases/topic_research.py b/src/foundry_mcp/core/research/workflows/deep_research/phases/topic_research.py\nindex 0f72c51..1093c69 100644\n--- a/src/foundry_mcp/core/research/workflows/deep_research/phases/topic_research.py\n+++ b/src/foundry_mcp/core/research/workflows/deep_research/phases/topic_research.py\n@@ -67,6 +67,7 @@ class TopicResearchMixin:\n         available_providers: list[Any],\n         *,\n         max_searches: int = 3,\n+        max_sources_per_provider: int | None = None,\n         timeout: float = 120.0,\n         seen_urls: set[str],\n         seen_titles: dict[str, str],\n@@ -85,6 +86,9 @@ class TopicResearchMixin:\n             state: Current research state (for config access and source storage)\n             available_providers: List of initialized search providers\n             max_searches: Maximum search iterations for this topic\n+            max_sources_per_provider: Max results to request from each provider\n+                per search call. When None, falls back to state.max_sources_per_query.\n+                Used for budget splitting across parallel topic researchers.\n             timeout: Timeout per search operation\n             seen_urls: Shared set of already-seen URLs (for deduplication)\n             seen_titles: Shared dict of normalized titles (for deduplication)\n@@ -107,6 +111,7 @@ class TopicResearchMixin:\n                 sub_query=sub_query,\n                 state=state,\n                 available_providers=available_providers,\n+                max_sources_per_provider=max_sources_per_provider,\n                 timeout=timeout,\n                 seen_urls=seen_urls,\n                 seen_titles=seen_titles,\n@@ -193,6 +198,7 @@ class TopicResearchMixin:\n         sub_query: SubQuery,\n         state: DeepResearchState,\n         available_providers: list[Any],\n+        max_sources_per_provider: int | None,\n         timeout: float,\n         seen_urls: set[str],\n         seen_titles: dict[str, str],\n@@ -201,10 +207,24 @@ class TopicResearchMixin:\n     ) -> int:\n         \"\"\"Execute search for a single query across all available providers.\n \n+        Args:\n+            query: Search query string\n+            sub_query: The SubQuery being researched\n+            state: Current research state\n+            available_providers: Search provider instances\n+            max_sources_per_provider: Max results per provider call (budget-split).\n+                Falls back to state.max_sources_per_query when None.\n+            timeout: Per-provider search timeout\n+            seen_urls: Shared URL dedup set\n+            seen_titles: Shared title dedup dict\n+            state_lock: Lock for thread-safe state mutations\n+            semaphore: Semaphore bounding concurrent search calls\n+\n         Returns the number of new (deduplicated) sources added to state.\n         \"\"\"\n         from foundry_mcp.core.research.providers import SearchProviderError\n \n+        effective_max_results = max_sources_per_provider or state.max_sources_per_query\n         added = 0\n \n         async with semaphore:\n@@ -216,7 +236,7 @@ class TopicResearchMixin:\n \n                     search_kwargs: dict[str, Any] = {\n                         \"query\": query,\n-                        \"max_results\": state.max_sources_per_query,\n+                        \"max_results\": effective_max_results,\n                         \"sub_query_id\": sub_query.id,\n                     }\n \n","truncated":false}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ^^^^^
NameError: name 'false' is not defined. Did you mean: 'False'?
